{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\simen\\\\Documents\\\\A_Studier\\\\Webutvikling\\\\prosjekt-3\\\\frontend\\\\src\\\\components\\\\MovieList\\\\MovieList.tsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport { observer } from \"mobx-react-lite\";\nimport Store from '../../mobx/store';\n\nconst MovieList = () => {\n  const startState = [{\n    title: \"\",\n    year: 0,\n    genres: [],\n    storyline: \"\",\n    posterurl: \"\",\n    imdbRating: 0,\n    actors: [],\n    rating: 0\n  }];\n  const [numberOfMovies, setNumberOfMovies] = useState(5);\n  const [movies, setMovies] = useState(startState);\n  const store = useContext(Store);\n  const {\n    states\n  } = store;\n  useEffect(() => {\n    const fetchDataAsync = async () => {\n      if (states[0].search_string) {\n        // non-empty search string -> search for the specified title\n        console.log(\"non-empty string: \" + states[0].search_string);\n        await fetch(\"http://localhost:3000/api/movies/title/\" + states[0].search_string, {\n          method: 'GET'\n        }).then(res => res.json()).then(movies => setMovies(movies)).catch(error => {\n          console.log('Could not get movies from DB');\n        });\n        let res = fetchDataAsync();\n      } else {\n        // empty search string -> get all movies\n        console.log(\"empty string: \" + states[0].search_string);\n        await fetch(\"http://localhost:3000/api/movies/\", {\n          method: 'GET'\n        }).then(res => res.json()).then(movies => setMovies(movies)).catch(error => {\n          console.log('Could not get movies from DB');\n        });\n      }\n    };\n\n    let movies = fetchDataAsync();\n\n    if (states[0].search_string) {\n      // non-empty search string -> search for the specified title\n      console.log(\"non-empty string: \" + states[0].search_string);\n\n      const fetchDataAsync = async () => {\n        await fetch(\"http://localhost:3000/api/movies/title/\" + states[0].search_string, {\n          method: 'GET'\n        }).then(res => res.json()).then(movies => setMovies(movies)).catch(error => {\n          console.log('Could not get movies from DB');\n        });\n      };\n\n      let res = fetchDataAsync();\n    } else {\n      // empty search string -> get all movies\n      console.log(\"empty string\");\n\n      const fetchDataAsync = async () => {\n        await fetch(\"http://localhost:3000/api/movies/\", {\n          method: 'GET'\n        }).then(res => res.json()).then(movies => {\n          console.log(movies);\n          return movies;\n        }).then(movies => setMovies(movies)).catch(error => {\n          console.log('Could not get movies from DB');\n        });\n      };\n\n      let res = fetchDataAsync();\n    }\n\n    console.log(movies);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default observer(MovieList);\n/*\r\nimport {bindActionCreators, Dispatch} from 'redux';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { State } from '../../index'\r\n\r\nimport { observer } from \"mobx-react-lite\"\r\nimport Store from '../../mobx/store'\r\n\r\n\r\n\r\nconst mapState = (state: State) => ({\r\n    search_string: \"\"\r\n})\r\n\r\nconst mapDispatch = {\r\n    updateSearch: (search_string: string) => ({ type: search_string})\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n    search_string: string\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// Denne funksjonen tar inn state (en bit av redux) og sender\r\n// det til komponenten din som en props\r\nfunction mapStateToProps(state: State) {\r\n    return {\r\n        search_string: state.search_string,\r\n        filter_params: state.filter_params\r\n    };\r\n}\r\n\r\n\r\nexport default connector(MovieList);\r\n\r\n\r\n */","map":{"version":3,"sources":["C:/Users/simen/Documents/A_Studier/Webutvikling/prosjekt-3/frontend/src/components/MovieList/MovieList.tsx"],"names":["React","useContext","useEffect","useState","observer","Store","MovieList","startState","title","year","genres","storyline","posterurl","imdbRating","actors","rating","numberOfMovies","setNumberOfMovies","movies","setMovies","store","states","fetchDataAsync","search_string","console","log","fetch","method","then","res","json","catch","error"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport MovieBox from '../MovieBox/MovieBox';\r\nimport { observer } from \"mobx-react-lite\"\r\nimport Store from '../../mobx/store'\r\n\r\n\r\nconst MovieList = () => {\r\n    const startState = [{\r\n        title: \"\",\r\n        year: 0,\r\n        genres: [],\r\n        storyline: \"\",\r\n        posterurl: \"\",\r\n        imdbRating: 0,\r\n        actors: [],\r\n        rating: 0\r\n    }];\r\n\r\n    const [numberOfMovies, setNumberOfMovies] = useState(5);\r\n    const [movies, setMovies] = useState(startState);\r\n    const store = useContext(Store);\r\n    const { states } = store;\r\n\r\n    useEffect( () => {\r\n        const fetchDataAsync = async () => {\r\n            if (states[0].search_string) {\r\n                // non-empty search string -> search for the specified title\r\n                console.log(\"non-empty string: \" + states[0].search_string);\r\n\r\n                await fetch(\"http://localhost:3000/api/movies/title/\" + states[0].search_string,\r\n                    {\r\n                        method: 'GET'\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(movies => setMovies(movies))\r\n                    .catch(error => {\r\n                        console.log('Could not get movies from DB');\r\n                    });\r\n                let res = fetchDataAsync();\r\n            }\r\n            else {\r\n                // empty search string -> get all movies\r\n                console.log(\"empty string: \" + states[0].search_string)\r\n\r\n                await fetch(\"http://localhost:3000/api/movies/\",\r\n                    {\r\n                        method: 'GET'\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(movies => setMovies(movies))\r\n                    .catch(error => {\r\n                        console.log('Could not get movies from DB');\r\n                    });\r\n            }\r\n        }\r\n        let movies = fetchDataAsync();\r\n\r\n\r\n\r\n\r\n        if (states[0].search_string) {\r\n            // non-empty search string -> search for the specified title\r\n            console.log(\"non-empty string: \" + states[0].search_string);\r\n            const fetchDataAsync = async () => {\r\n                await fetch(\"http://localhost:3000/api/movies/title/\" + states[0].search_string,\r\n                    {\r\n                        method: 'GET'\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(movies => setMovies(movies))\r\n                    .catch(error => {\r\n                        console.log('Could not get movies from DB');\r\n                    });\r\n            }\r\n            let res = fetchDataAsync();\r\n        }\r\n        else {\r\n            // empty search string -> get all movies\r\n            console.log(\"empty string\");\r\n            const fetchDataAsync = async () => {\r\n                await fetch(\"http://localhost:3000/api/movies/\",\r\n                    {\r\n                        method: 'GET'\r\n                    })\r\n                    .then(res => res.json())\r\n                    .then(movies => {\r\n                        console.log(movies)\r\n                        return movies})\r\n                    .then(movies => setMovies(movies))\r\n                    .catch(error => {\r\n                        console.log('Could not get movies from DB');\r\n                    });\r\n            }\r\n            let res = fetchDataAsync();\r\n        }\r\n        console.log(movies);\r\n    }, []);\r\n\r\n    return(\r\n        <div>\r\n            {/* movies.map( movie =>\r\n                <li key={movie.title}>\r\n                    <MovieBox id={movie._id} movieTitle={movie.title} duration={movie.duration} genres={movie.genres} imgUrl={movie.posterurl} year={movie.year}/>\r\n                </li>\r\n            )\r\n            */}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default observer(MovieList);\r\n\r\n/*\r\nimport {bindActionCreators, Dispatch} from 'redux';\r\nimport { connect, ConnectedProps } from 'react-redux'\r\nimport { State } from '../../index'\r\n\r\nimport { observer } from \"mobx-react-lite\"\r\nimport Store from '../../mobx/store'\r\n\r\n\r\n\r\nconst mapState = (state: State) => ({\r\n    search_string: \"\"\r\n})\r\n\r\nconst mapDispatch = {\r\n    updateSearch: (search_string: string) => ({ type: search_string})\r\n}\r\n\r\nconst connector = connect(mapState, mapDispatch)\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>\r\n\r\ntype Props = PropsFromRedux & {\r\n    search_string: string\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// Denne funksjonen tar inn state (en bit av redux) og sender\r\n// det til komponenten din som en props\r\nfunction mapStateToProps(state: State) {\r\n    return {\r\n        search_string: state.search_string,\r\n        filter_params: state.filter_params\r\n    };\r\n}\r\n\r\n\r\nexport default connector(MovieList);\r\n\r\n\r\n */"]},"metadata":{},"sourceType":"module"}